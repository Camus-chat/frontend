import { HeroUIProvider } from '@heroui/system';
import type { ReactNode } from 'react';

import '@/app/styles';
import { MemberProvider, requestMemberInfo } from '@/entities/member';
import { getToken } from '@/shared/api';
import { TokenProvider } from '@/shared/store';

export const metadata = {
  title: 'CAMUS',
  // description: 'Generated by Next.js',
  icons: {
    icon: '/images/logo.svg',
  },
};

const RootLayout = async ({ children }: { children: ReactNode }) => {
  const token = await getToken();
  const member = token ? await requestMemberInfo() : null;

  return (
    <html lang='en'>
      <body>
        <HeroUIProvider className='h-screen w-screen'>
          <TokenProvider token={token}>
            <MemberProvider member={member}>{children}</MemberProvider>
          </TokenProvider>
        </HeroUIProvider>
      </body>
    </html>
  );
};

export default RootLayout;
